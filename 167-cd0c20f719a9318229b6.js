(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{1432:function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),r=a(n(4)),o=n(976),l=a(n(1433)),s=r.default.bind(l.default),u=function(){return i.default.createElement("div",{className:s("indicator")},i.default.createElement(o.Placeholder,{title:"I'm Loading"}))};t.default=u},1433:function(e,t,n){"use strict";n.r(t),t.default={indicator:"MyInitialLoadingIndicator-module__indicator___2aF8k"}},1434:function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),r=a(n(4)),o=n(976),l=a(n(1435)),s=r.default.bind(l.default),u=function(){return i.default.createElement("div",{className:s("indicator")},i.default.createElement(o.Placeholder,{title:"I'm Loading More"}))};t.default=u},1435:function(e,t,n){"use strict";n.r(t),t.default={indicator:"MyProgressiveLoadingIndicator-module__indicator___3LNjJ"}},2587:function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(22)),r=a(n(24)),o=a(n(30)),l=a(n(27)),s=a(n(28)),u=a(n(29)),d=a(n(0)),c=a(n(2588));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,s.default)(this,n)}}var m=function(e){(0,l.default)(n,e);var t=f(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).updateKey=a.updateKey.bind((0,o.default)(a)),a.state={refreshKey:0},a}return(0,r.default)(n,[{key:"updateKey",value:function(){this.setState((function(e){return{refreshKey:e.refreshKey+1}}))}},{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement("button",{type:"button",onClick:this.updateKey},"Refresh"),d.default.createElement(c.default,{key:"".concat(this.state.refreshKey)}))}}]),n}(d.default.Component);t.default=m},2588:function(e,t,n){"use strict";var a=n(11),i=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(22)),o=i(n(24)),l=i(n(30)),s=i(n(27)),u=i(n(28)),d=i(n(29)),c=i(n(0)),f=n(976),m=a(n(345)),p=i(n(4)),h=i(n(1432)),g=i(n(1434)),y=i(n(1226)),v=i(n(2589)),b=i(n(1227));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var O=p.default.bind(b.default),j=function(e){(0,s.default)(n,e);var t=x(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).requestData=a.requestData.bind((0,l.default)(a)),a.state={isFinishedLoading:!1,currentPageKey:null,items:[]},a}return(0,o.default)(n,[{key:"requestData",value:function(){var e=this;(0,v.default)(this.state.currentPageKey).then((function(t){return e.setState((function(e){return{isFinishedLoading:t.isFinalPage,currentPageKey:t.nextPageKey,items:e.items.concat(t.items)}}))}))}},{key:"createItems",value:function(){return this.state.items.map((function(e){return c.default.createElement(m.Item,{key:e.key},c.default.createElement(f.Placeholder,{title:e.title,className:O("placeholder")}))}))}},{key:"render",value:function(){return c.default.createElement(y.default,null,c.default.createElement(m.default,{dividerStyle:"standard",isFinishedLoading:this.state.isFinishedLoading,onRequestItems:this.requestData,ariaLabel:"Progressive Loading",initialLoadingIndicator:c.default.createElement(h.default,null),progressiveLoadingIndicator:c.default.createElement(g.default,null)},this.createItems()))}}]),n}(c.default.Component);t.default=j},2589:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){return new Promise((function(t){return setTimeout((function(){t(function(e){var t=!1,n=(e>=0?e:0)+1;n>9&&(t=!0);for(var a=[],i=0;i<10;i+=1)a.push({title:"Item ".concat(10*e+i),key:"unique-".concat(10*e+i)});return{nextPageKey:n,items:a,isFinalPage:t}}(e))}),2e3)}))};t.default=a},2916:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d}));n(0);var a=n(331),i=n(1225),r=n(2587),o=n.n(r);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u={};function d(e){var t=e.components,n=s(e,["components"]);return Object(a.mdx)("wrapper",l({},u,n,{components:t,mdxType:"MDXLayout"}),Object(a.mdx)(i.a,{mdxType:"Badge"}),Object(a.mdx)("h1",{id:"terra-infinitelist---progressive-loading"},"Terra InfiniteList - Progressive Loading"),Object(a.mdx)("p",null,"To limit the impact of large data sets, progressive loading of list items is available through the InfiniteList. As the InfiniteList approaches the bottom of its scrollHeight the ",Object(a.mdx)("inlineCode",{parentName:"p"},"onRequestItems")," callback will execute, allowing the implementation to lazy load data into the list."),Object(a.mdx)("h2",{id:"state-management"},"State Management"),Object(a.mdx)("p",null,"First we'll be defaulting our state to an empty array of items, a null page key, and false for isFinishedLoading in the constructor. "),Object(a.mdx)("pre",null,Object(a.mdx)("code",{parentName:"pre",className:"language-jsx"},"  constructor(props) {\n    super(props);\n\n    this.state = { isFinishedLoading: false, currentPageKey: null, items: [] };\n  }\n")),Object(a.mdx)("p",null,"In our data request callback we'll pass our parameters of our page key, then wait for the response returned from our async service. Upon receiving the response we'll map our returned paging indicators and add our new items to our existing state."),Object(a.mdx)("pre",null,Object(a.mdx)("code",{parentName:"pre",className:"language-jsx"},"  requestData() {\n    mockRequest(this.state.currentPageKey).then(response => (\n      this.setState(prevState => ({\n        isFinishedLoading: response.isFinalPage,\n        currentPageKey: response.nextPageKey,\n        items: prevState.items.concat(response.items),\n      }))\n    ));\n  }\n")),Object(a.mdx)("h2",{id:"unpack-data"},"Unpack Data"),Object(a.mdx)("p",null,"We can then implement the unpack of our state data into our list items. Provide unique key value to prop ",Object(a.mdx)("inlineCode",{parentName:"p"},"key"),", if internal state of ",Object(a.mdx)("inlineCode",{parentName:"p"},"InfiniteList")," needs to be updated."),Object(a.mdx)("pre",null,Object(a.mdx)("code",{parentName:"pre",className:"language-jsx"},"  createItems() {\n    return this.state.items.map(item => (\n      <Item key={item.key}>\n        <Placeholder title={item.title} />\n      </Item>\n    ));\n  }\n")),Object(a.mdx)("p",null,"Finally we'll declare our infinite list looping. Providing the InfiniteList with an ",Object(a.mdx)("inlineCode",{parentName:"p"},"initialLoadingIndicator")," and ",Object(a.mdx)("inlineCode",{parentName:"p"},"progressiveLoadingIndicator"),". The infinite list does not have visual styling, so loading indicators are customizable. Followed up with setting the ",Object(a.mdx)("inlineCode",{parentName:"p"},"onRequestItems")," to our requestData method."),Object(a.mdx)("pre",null,Object(a.mdx)("code",{parentName:"pre",className:"language-jsx"},'  render() {\n    return (\n      <MyExampleContainer>\n        <InfiniteList\n          dividerStyle="standard"\n          isFinishedLoading={this.state.isFinishedLoading}\n          onRequestItems={this.requestData}\n          initialLoadingIndicator={<MyInitialLoadingIndicator />}\n          progressiveLoadingIndicator={<MyProgressiveLoadingIndicator />}\n        >\n          {this.createItems()}\n        </InfiniteList>\n      </MyExampleContainer>\n    );\n  }\n')),Object(a.mdx)("p",null,"Using these steps we get the following example:"),Object(a.mdx)("h2",{id:"example"},"Example"),Object(a.mdx)(o.a,{title:"Sections Header Infinite List",mdxType:"RefreshProgressive"}))}d.isMDXComponent=!0}}]);